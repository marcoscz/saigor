@using MudBlazor
@inject NavigationManager NavigationManager

<MudDrawerHeader Class="py-4">
    <MudText Typo="Typo.h5" Color="Color.Primary" Class="ml-2 font-weight-bold">Saigor</MudText>
    <MudSpacer />
    <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Primary" Edge="Edge.End" OnClick="ToggleNavMenu" aria-label="Abrir/Fechar menu de navegação" />
</MudDrawerHeader>

<MudNavMenu Dense="true" Class="py-2">
    <MudNavLink Icon="@Icons.Material.Filled.Dashboard" Match="NavLinkMatch.All" IconColor="Color.Primary" OnClick="GoDashboard">
        Dashboard
    </MudNavLink>

    <MudNavGroup Title="Gerenciamento" Icon="@Icons.Material.Filled.Settings" IconColor="Color.Primary" Expanded="true">
        <MudNavLink Icon="@Icons.Material.Filled.Work" IconColor="Color.Success" OnClick="GoJobs">
            Jobs
        </MudNavLink>
        <MudNavLink Icon="@Icons.Material.Filled.Storage" IconColor="Color.Info" OnClick="GoConexoes">
            Conexões
        </MudNavLink>
        <MudNavLink Icon="@Icons.Material.Filled.Assignment" IconColor="Color.Warning" OnClick="GoTarefas">
            Tarefas
        </MudNavLink>
        <MudNavLink Icon="@Icons.Material.Filled.Link" IconColor="Color.Primary" OnClick="GoJobTarefas">
            Job-Tarefas
        </MudNavLink>
    </MudNavGroup>

    <MudNavGroup Title="Monitoramento" Icon="@Icons.Material.Filled.Timeline" IconColor="Color.Primary" Expanded="true">
        <MudNavLink Href="/logs" Icon="@Icons.Material.Filled.Assessment" IconColor="Color.Error">
            Logs
        </MudNavLink>
        <MudNavLink Href="/counter" Icon="@Icons.Material.Filled.Analytics" IconColor="Color.Secondary">
            Counter
        </MudNavLink>
    </MudNavGroup>

    <MudNavGroup Title="Integrações" Icon="@Icons.Material.Filled.Cloud" IconColor="Color.Primary" Expanded="true">
        <MudNavLink Href="/api-external" Icon="@Icons.Material.Filled.Http" IconColor="Color.Primary">
            API Externa
        </MudNavLink>
    </MudNavGroup>
</MudNavMenu>

@code {
    /// <summary>
    /// Callback para alternar o menu de navegação lateral.
    /// </summary>
    [Parameter]
    public EventCallback OnToggleNav { get; set; }

    private bool collapseNavMenu = true;

    /// <summary>
    /// Alterna o menu de navegação lateral e dispara o callback.
    /// </summary>
    private async Task ToggleNavMenu()
    {
        collapseNavMenu = !collapseNavMenu;
        await OnToggleNav.InvokeAsync();
    }

    private void GoDashboard()
        => NavigationManager.NavigateTo("/", true);
    private void GoJobs()
        => NavigationManager.NavigateTo("/jobs", true);
    private void GoConexoes()
        => NavigationManager.NavigateTo("/conexoes", true);
    private void GoTarefas()
        => NavigationManager.NavigateTo("/tarefas", true);
    private void GoJobTarefas()
        => NavigationManager.NavigateTo("/jobtarefas", true);

}